# Hal 层添加访问 linux 驱动的接口

## 


## 


不同于 linux，可以之间在应用中访问驱动，在 Android 中，我们需要添加 hal 层给 Framework，Framework 层添加对应的 JNI 代码，


在 `device/Jelly/Rice14/` 目录下创建：


```bash
PACKAGE=device.jelly.rice14.hellohidl@1.0
LOC=device/Jelly/Rice14/hardware/interfaces/hellohidl/1.0/default
hidl-gen -o $LOC -Lc++-impl -rdevice.jelly.rice14:device/Jelly/Rice14/hardware/interfaces $PACKAGE
hidl-gen -o $LOC -Lc++-impl $PACKAGE
```

```bash
PACKAGE=jelly.hardware.hello_hidl@1.0
LOC=vendor/jelly/hardware/interfaces/hello_hidl/1.0/default
hidl-gen -o $LOC -Lc++-impl -rjelly.hardware:vendor/jelly/hardware/interfaces $PACKAGE
hidl-gen -o $LOC -Landroidbp-impl -rjelly.hardware:vendor/jelly/hardware/interfaces $PACKAGE
```

## 参考资料

* [Android系统开发入门-11.添加hidl服务](http://qiushao.net/2020/01/07/Android%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/11-%E6%B7%BB%E5%8A%A0hidl%E6%9C%8D%E5%8A%A1/)
* [Android系统开发入门-12.hidl服务回调](http://qiushao.net/2020/01/10/Android%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/12-hidl%E6%9C%8D%E5%8A%A1%E5%9B%9E%E8%B0%83/)
* [Android HIDL模型下HAL Service添加SELinux规则实战](https://blog.csdn.net/tkwxty/article/details/122810378)
* [ROC-RK3399-PC Pro Android10 源码](https://www.t-firefly.com/doc/download/145.html#other_399)
* * [一个简单的HIDL开发笔记](https://yuhanchen5027.github.io/article/2021/08/04/Simple-HIDL-development-note/)
* [简单HIDL HAL的实现](https://blog.xzr.moe/archives/99/)
* [hidl 服务启动流程](https://blog.csdn.net/linuxarmsummary/article/details/113107061)